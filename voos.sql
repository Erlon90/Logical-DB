CREATE DATABASE IF NOT EXISTS PASSAGENS_AEREAS;
USE PASSAGENS_AEREAS;

CREATE TABLE IF NOT EXISTS PASSAGEIROS(
COD_PASSAGEIRO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
SOBRENOME VARCHAR(100) NOT NULL,
DATA_NASC DATE NOT NULL,
NACIONALIDADE VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS AEROPORTOS(
ID_AEROPORTO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
CIDADE VARCHAR(100) NOT NULL,
ESTADO VARCHAR(100) NOT NULL,
PAIS VARCHAR(100) NOT NULL,
LATITUDE VARCHAR(50) NOT NULL,
LONGITUDE VARCHAR(50) NOT NULL,
TAMANHO_PISTA DECIMAL(20,1) NOT NULL
);

CREATE TABLE IF NOT EXISTS CIA_AEREAS(
ID_CIA INT PRIMARY KEY,
CNPJ VARCHAR(20) NOT NULL,
NOME_FANTASIA VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS RESERVAS(
ID_RESERVA INT PRIMARY KEY,
DATA_RESERVA DATE NOT NULL,
FORMA_PGTO ENUM("DINHEIRO","PIX","DEBITO","CREDITO") NOT NULL,
VALOR_RESERVA DECIMAL(10,2) NOT NULL
);

CREATE TABLE IF NOT EXISTS AERONAVES(
PFX_AERO VARCHAR(20) PRIMARY KEY,
MODELO VARCHAR(50) NOT NULL,
ANO_FABR YEAR NOT NULL,
FABRICANTE VARCHAR(50) NOT NULL,
POLTRONAS INT NOT NULL,
CIA_AEREA INT NOT NULL,
CONSTRAINT CIA_AERO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA));

CREATE TABLE IF NOT EXISTS VOOS(
ID_VOO INT,
ASSENTO VARCHAR(10),
AERO_PART INT NOT NULL,
DATA_PART DATE NOT NULL,
HORA_PART TIME NOT NULL,
AERO_CHEG INT NOT NULL,
DATA_CHEG DATE NOT NULL,
HORA_CHEG TIME NOT NULL,
AERONAVE VARCHAR(20) NOT NULL,
CIA_AEREA INT NOT NULL,
PRIMARY KEY(ID_VOO,ASSENTO),
CONSTRAINT AEROP_VOO1 FOREIGN KEY(AERO_PART) REFERENCES AEROPORTOS(ID_AEROPORTO),
CONSTRAINT AEROP_VOO2 FOREIGN KEY(AERO_CHEG) REFERENCES AEROPORTOS(ID_AEROPORTO),  
CONSTRAINT AERON_VOO FOREIGN KEY(AERONAVE) REFERENCES AERONAVES(PFX_AERO),
CONSTRAINT CIA_VOO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA)
);

CREATE TABLE IF NOT EXISTS VOOS_RESERVAS(
ID_VOO INT,
ASSENTO VARCHAR(10),
ID_RESERVA INT,
PRIMARY KEY(ID_VOO,ASSENTO,ID_RESERVA),
CONSTRAINT VR1 FOREIGN KEY(ID_VOO,ASSENTO) REFERENCES VOOS(ID_VOO,ASSENTO),
CONSTRAINT VR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA)
);

CREATE TABLE IF NOT EXISTS PASSAGEIROS_RESERVAS(
PASSAGEIRO INT,
ID_RESERVA INT,
PRIMARY KEY(PASSAGEIRO,ID_RESERVA),
CONSTRAINT PR1 FOREIGN KEY(PASSAGEIRO) REFERENCES PASSAGEIROS(COD_PASSAGEIRO),
CONSTRAINT PR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA));

INSERT INTO aeronaves
(PFX_AERO,
MODELO,
ANO_FABR,
FABRICANTE,
POLTRONAS,
CIA_AEREA)
VALUES
("1111AA",
"Boeing177",
"2000",
"Boeing",
"50",
"GOL"),
("1111BB",
"Boeing277",
"2001",
"Boeing",
"40",
"LATAM"),
("1111CC",
"Boeing178",
"2003",
"Boeing",
"60",
"AZUL"),
("1111DD",
"Boeing137",
"2005",
"Boeing",
"55",
"GOL"),
("1111EE",
"Boeing577",
"2002",
"Boeing",
"52",
"AZUL");

INSERT INTO aeroportos
(ID_AEROPORTO,
NOME,
CIDADE,
ESTADO,
PAIS,
LATITUDE,
LONGITUDE,
TAMANHO_PISTA)
VALUES
(1,"SANTOS DUMONT","RIO DE JANEIRO","RJ","BR","1111-333","4444-222","2 KM"),
(2,"GALEAO","RIO DE JANEIRO","RJ","BR","1111-222","4444-333","3 KM"),
(3,"DA VINCI","PARANÁ","PR","BR","1111-555","4444-333","5 KM"),
(4,"KLEBER ANDRADE","VITORIA","ES","BR","1111-111","4444-777","4 KM"),
(5,"NIKOLAS TESLA","AUSCHWITZ","ALEMANHA","GRMNY","1111-666","8888-000","7 KM");
INSERT INTO cia_aereas
(ID_CIA,
CNPJ,
NOME_FANTASIA)
VALUES
(1,"22122-666","X"),
(2,"22233-777","Y"),
(3,"22244-555","Z"),
(4,"11222-555","A"),
(5,"224422-555","B");
INSERT INTO passageiros
(COD_PASSAGEIRO,
NOME,
SOBRENOME,
DATA_NASC,
NACIONALIDADE)
VALUES
(111,"Jose","Silva","01/02/2000","BR"),
(222,"Maria","Pereira","01/03/2000","PER"),
(333,"Joaquim","Porto","01/04/2000","FRA"),
(444,"Lucas","Serpa","01/05/2000","CHIL"),
(555,"João","Ramos","01/05/2000","ARG");

INSERT INTO passageiros_reservas
(PASSAGEIRO,
ID_RESERVA)
VALUES
("Jose","001"),
("Maria","002"),
("Joaquim","003"),
("Lucas","004"),
("João","005");INSERT INTO reservas
(ID_RESERVA,
DATA_RESERVA,
FORMA_PGTO,
VALOR_RESERVA)
VALUES
("001","02/05/1999","Crédito","500"),
("002","02/04/1999","Débito","600"),
("003","02/06/1999","Dinheiro","700"),
("004","02/07/1999","Cheque","800"),
("005","02/09/1999","á vista","900");


INSERT INTO `passagens_aereas`.`voos`
(ID_VOO,
ASSENTO,
AERO_PART,
DATA_PART,
HORA_PART,
AERO_CHEG,
DATA_CHEG,
HORA_CHEG,
AERONAVE,
CIA_AEREA)
VALUES
("11","01","Santos Dumont","01/08/2001","19:00","Galeao","02/08/2001","05:00","Boeing-111","1"),
("22","02","Galeao","02/08/2001","18:00","Leonardo da Vinci","03/08/2001","06:00","Boeing-222","2"),
("33","03","Leonardo da Vinci","03/08/2001","20:00","Santos duMont","04/08/2001","04:00","Boeing-333","3"),
("44","04","Kleber Andrade","04/08/2001","21:00","Nikolas Tesla","05/08/2001","07:00","Boeing-444","4"),
("55","05","Nikolas Tesla","05/08/2001","22:00","Kleber Andrade","06/08/2001","08:00","Boeing-555","5");

INSERT INTO `passagens_aereas`.`voos_reservas`
(ID_VOO,
ASSENTO,
ID_RESERVA)
VALUES
("0001","10","002"),
("0003","11","003"),
("0004","13","001"),
("0002","12","005"),
("0006","16","006");
